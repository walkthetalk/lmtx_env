\setuppapersize[A4,landscape,rotated,270][A4]

% @brief 使用独立layout设定 even/odd，doublesided 与 竖排 不兼容。
%        也可以是使用 left/right 设置 layout
\setuppagenumbering[
  state=start,
  way=bytext,
  location=none,%header,
  %alternative=doublesided,
  %left=\switchToLeftLayout,
  %right=\switchToRightLayout,
]

% @brief 全局 layout
\setuplayout[
  % vertical
    top=10mm,
    topdistance=2mm,
      header=7mm,
        headerdistance=2mm,
        footerdistance=2mm,
      footer=7mm,
    bottomdistance=2mm,
    bottom=10mm,
  height=fit,
  % horizontal
    leftedge=10mm,
      leftedgedistance=2mm,
        leftmargin=20mm,
          leftmargindistance=2mm,
          rightmargindistance=2mm,
        rightmargin=20mm,
      rightedgedistance=2mm,
    rightedge=10mm,
  width=fit,
  %location=middle,
  %marking=on
]
\setuplayout[
  topspace=\dimexpr(\topheight + \topdistance),
  bottomspace=\dimexpr(\bottomheight + \bottomdistance),
  backspace=\dimexpr(\leftedgewidth + \leftedgedistance + \leftmarginwidth + \leftmargindistance),
  cutspace=\dimexpr(\rightedgewidth + \rightedgedistance + \rightmarginwidth + \rightmargindistance),
]

% @brief 偶数页、奇数页不同布局设定
\definelayout[even][
  bottomspace=\dimexpr(\bottomheight + \bottomdistance + 10mm)
]
\definelayout[odd][
  topspace=\dimexpr(\topheight + \topdistance + 10mm)
]

% set the background clors
% NOTE: it is confilict with \show frame
\if 0
\setupbackgrounds[page][background=color,backgroundcolor=gray:1]
\setupbackgrounds[top, bottom][background=color,backgroundcolor=gray:1]
\setupbackgrounds[header][background=color,backgroundcolor=darkyellow]
\setupbackgrounds[footer][background=color,backgroundcolor=darkyellow]
\setupbackgrounds[text][leftedge,leftmargin,text,rightmargin,rightedge][background=color,backgroundcolor=white]
\fi
