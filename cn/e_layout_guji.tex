\definepapersize[gujipaper][A4]
% @brief 必须先设定 papersize, 才能确定页面大小，然后再分左右页调整旋转方向时才不会导致文字超出页面
\setuppapersize[A4,landscape,rotated][A4]

% @brief 使用独立layout设定 even/odd，doublesided 与 竖排 不兼容。
%        也可以是使用 left/right 设置 layout
\setuppagenumbering[
  state=start,
  way=bytext,
  location=none,%header,
  % @brief 要想使用 \setbackgrounds[leftpage]，必须使用 doublesided
  alternative=doublesided,
]

\startsetups rightPageSetup
% @brief 强行旋转，针对竖排
\setuppapersize[A4,landscape,270][A4]
\setuplayout[
  % vertical
    top=10mm,
    topdistance=2mm,
      header=7mm,
        headerdistance=2mm,
        footerdistance=2mm,
      footer=7mm,
    bottomdistance=2mm,
    bottom=10mm,
  height=fit,
  % horizontal
    leftedge=10mm,
      leftedgedistance=2mm,
        leftmargin=20mm,
          leftmargindistance=2mm,
          rightmargindistance=2mm,
        rightmargin=20mm,
      rightedgedistance=2mm,
    rightedge=10mm,
  width=fit,
  topspace=12mm,
  bottomspace=32mm,
  backspace=34mm,
  cutspace=34mm,
]
\stopsetups

\startsetups leftPageSetup
% @brief 强行旋转，针对竖排
\setuppapersize[A4,landscape,90][A4]
\setuplayout[
  % vertical
    top=10mm,
    topdistance=2mm,
      header=7mm,
        headerdistance=2mm,
        footerdistance=2mm,
      footer=7mm,
    bottomdistance=2mm,
    bottom=10mm,
  height=fit,
  % horizontal
    leftedge=10mm,
      leftedgedistance=2mm,
        leftmargin=20mm,
          leftmargindistance=2mm,
          rightmargindistance=2mm,
        rightmargin=20mm,
      rightedgedistance=2mm,
    rightedge=10mm,
  width=fit,
  topspace=32mm,
  bottomspace=12mm,
  backspace=34mm,
  cutspace=34mm,
]
\stopsetups

\setupbackgrounds[rightpage][setups=rightPageSetup]
\setupbackgrounds[leftpage][setups=leftPageSetup]

% set the background clors
% NOTE: it is confilict with \show frame
\if 0
\setupbackgrounds[page][background=color,backgroundcolor=gray:1]
\setupbackgrounds[top, bottom][background=color,backgroundcolor=gray:1]
\setupbackgrounds[header][background=color,backgroundcolor=darkyellow]
\setupbackgrounds[footer][background=color,backgroundcolor=darkyellow]
\setupbackgrounds[text][leftedge,leftmargin,text,rightmargin,rightedge][background=color,backgroundcolor=white]
\fi
