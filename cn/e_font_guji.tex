% zhfonts
% @todo 必須設置成ConTeXt自帶的字體大小，否則TABLE/TH中的數學環境無法使用上下標
%       https://github.com/contextgarden/luametatex/issues/4
\usemodule[t][zhfonts][style=rm, size=\measure{fs4s}, puncs=false]
%\setupzhfonts[feature][onum=yes, pnum=yes]

% note: 中文部分以noto-cjk爲基礎，斜體用Adobe的中文字體，粗斜體全部用Adobe的黑體
\setupzhfonts
[serif]
[regular=notoserifcjktc,%adobesongstd,
bold=notoserifcjktcbold,%adobeheitistd,
italic=adobesongstd,
bolditalic=adobeheitistd]

\setupzhfonts
[sans]
[regular=notosanscjktc,%adobefangsongstd,
bold=notosanscjktcblack,%adobeheitistd,
italic=adobefangsongstd,
bolditalic=adobeheitistd]

\setupzhfonts
[mono]
[regular=notosansmonocjktc,%adobekaitistd,
bold=notosansmonocjktcbold,%adobeheitistd,
italic=adobekaitistd,
bolditalic=adobeheitistd]

\setupzhfonts
[latin, serif]
[regular=notoserifregular,%texgyrepagellaregular,
bold=notoserifbold,%texgyrepagellabold,
italic=notoserifitalic,%texgyrepagellaitalic,
bolditalic=notoserifbolditalic%texgyrepagellabolditalic
]

% todo: noto的mono沒有斜體，暫用adobe的source-code代替
\setupzhfonts
[latin, mono][
  regular=notosansmonoregular,%texgyrecursorregular,
  bold=notosansmonobold,%texgyrecursorbold,
  italic=sourcecodeproitalic,
  bolditalic=sourcecodeprobolditalic
]

\setupzhfonts
[latin, sans]
[regular=notosansregular,%texgyreherosregular,
bold=notosansbold,%texgyreherosbold,
italic=notosansitalic,%texgyreherositalic,
bolditalic=notosansbolditalic%texgyreherosbolditalic
]

% @note 数学字体
\definefontfeature[notosans-math-bold][boldened]
\starttypescript[math][notomath]
  \definefontsynonym[MathRoman][name:notosansmath][features={math\mathsizesuffix,mathextra}]
  % @note bold math，防止表頭加粗環境下出錯
  \definefontsynonym[MathRomanBold][name:notosansmath][features={math\mathsizesuffix,notosans-math-bold,mathextra}]
\stoptypescript
\setupzhfonts[math][notomath]

% @todo: zhfonts會修改所有starttext，暫時保留此行爲，如果後續有更改，則需在此設置
%\zhfonts[rm,\measure{fs4s}]
% %D 预先设置文档主字体类型与尺寸，防止 ConTexT 将 12pt 作为 1em 的绝对长度
%\setupbodyfont[zhfonts, rm, \measure{fs4s}]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% zhpunc %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usemodule[zhpunc][pattern=kaiming, spacequad=0.5, hangjian=false]
