
% 缺省的交叉引用会在前面自动添加空格
\def\defineIn[#1][#2]{%
\expandafter\definereferenceformat[in#1][#2]
\expandafter\let
  \csname stdin#1\expandafter\endcsname
  \csname in#1\endcsname
\expandafter\def\csname in#1\endcsname[##1]{%
\csname stdin#1\endcsname[#1:##1]%
}
}

% 加載當前文件所在目錄下的文件
\startluacode
function commands.insamedir(url)
  tex.sprint(status.filename:match("^(.+/).+$")..url)
end
\stopluacode
\define[1]\scomponent{%
  \component[\ctxlua{commands.insamedir([[#1]])}]
}
